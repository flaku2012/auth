{"remainingRequest":"F:\\Programy_Zainstalowane_Stale\\xampp\\htdocs\\2021\\auth\\client\\node_modules\\babel-loader\\lib\\index.js!F:\\Programy_Zainstalowane_Stale\\xampp\\htdocs\\2021\\auth\\client\\node_modules\\eslint-loader\\index.js??ref--14-0!F:\\Programy_Zainstalowane_Stale\\xampp\\htdocs\\2021\\auth\\client\\src\\store\\auth.js","dependencies":[{"path":"F:\\Programy_Zainstalowane_Stale\\xampp\\htdocs\\2021\\auth\\client\\src\\store\\auth.js","mtime":1640474060863},{"path":"F:\\Programy_Zainstalowane_Stale\\xampp\\htdocs\\2021\\auth\\client\\babel.config.js","mtime":1640282747456},{"path":"F:\\Programy_Zainstalowane_Stale\\xampp\\htdocs\\2021\\auth\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Programy_Zainstalowane_Stale\\xampp\\htdocs\\2021\\auth\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\Programy_Zainstalowane_Stale\\xampp\\htdocs\\2021\\auth\\client\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkY6XFxQcm9ncmFteV9aYWluc3RhbG93YW5lX1N0YWxlXFx4YW1wcFxcaHRkb2NzXFwyMDIxXFxhdXRoXFxjbGllbnRcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxlc21cXGFzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiB7CiAgICB0b2tlbjogbnVsbCwKICAgIHVzZXI6IG51bGwKICB9LAogIGdldHRlcnM6IHsKICAgIGF1dGhlbnRpY2F0ZWQ6IGZ1bmN0aW9uIGF1dGhlbnRpY2F0ZWQoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnRva2VuICYmIHN0YXRlLnVzZXI7CiAgICB9LAogICAgdXNlcjogZnVuY3Rpb24gdXNlcihzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUudXNlcjsKICAgIH0KICB9LAogIG11dGF0aW9uczogewogICAgU0VUX1RPS0VOOiBmdW5jdGlvbiBTRVRfVE9LRU4oc3RhdGUsIHRva2VuKSB7CiAgICAgIHN0YXRlLnRva2VuID0gdG9rZW47CiAgICB9LAogICAgU0VUX1VTRVI6IGZ1bmN0aW9uIFNFVF9VU0VSKHN0YXRlLCBkYXRhKSB7CiAgICAgIHN0YXRlLnVzZXIgPSBkYXRhOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgc2lnbkluOiBmdW5jdGlvbiBzaWduSW4oX3JlZiwgY3JlZGVudGlhbHMpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgZGlzcGF0Y2gsIHJlc3BvbnNlOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGRpc3BhdGNoID0gX3JlZi5kaXNwYXRjaDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoJ2F1dGgvc2lnbmluJywgY3JlZGVudGlhbHMpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBkaXNwYXRjaCgnYXR0ZW1wdCcsIHJlc3BvbnNlLmRhdGEudG9rZW4pKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGF0dGVtcHQ6IGZ1bmN0aW9uIGF0dGVtcHQoX3JlZjIsIHRva2VuKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBjb21taXQsIHN0YXRlLCByZXNwb25zZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZjIuY29tbWl0LCBzdGF0ZSA9IF9yZWYyLnN0YXRlOwoKICAgICAgICAgICAgICAgIGlmICh0b2tlbikgewogICAgICAgICAgICAgICAgICBjb21taXQoJ1NFVF9UT0tFTicsIHRva2VuKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoc3RhdGUudG9rZW4pIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gNDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5nZXQoJ2F1dGgvbWUnKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIGNvbW1pdCgnU0VUX1VTRVInLCByZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMTE7CiAgICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDJbImNhdGNoIl0oNCk7CiAgICAgICAgICAgICAgICBjb21taXQoJ1NFVF9UT0tFTicsIG51bGwpOwogICAgICAgICAgICAgICAgY29tbWl0KCdTRVRfVVNFUicsIG51bGwpOwoKICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCBudWxsLCBbWzQsIDExXV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBzaWduT3V0OiBmdW5jdGlvbiBzaWduT3V0KF9yZWYzKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMy5jb21taXQ7CiAgICAgIHJldHVybiBheGlvcy5wb3N0KCdhdXRoL3NpZ25vdXQnKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBjb21taXQoJ1NFVF9UT0tFTicsIG51bGwpOwogICAgICAgIGNvbW1pdCgnU0VUX1VTRVInLCBudWxsKTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["F:/Programy_Zainstalowane_Stale/xampp/htdocs/2021/auth/client/src/store/auth.js"],"names":["axios","namespaced","state","token","user","getters","authenticated","mutations","SET_TOKEN","SET_USER","data","actions","signIn","credentials","dispatch","post","response","attempt","commit","get","signOut","then"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,eAAc;AACVC,EAAAA,UAAU,EAAE,IADF;AAEVC,EAAAA,KAAK,EAAE;AACHC,IAAAA,KAAK,EAAE,IADJ;AAEHC,IAAAA,IAAI,EAAE;AAFH,GAFG;AAOVC,EAAAA,OAAO,EAAE;AACLC,IAAAA,aADK,yBACSJ,KADT,EACe;AAChB,aAAOA,KAAK,CAACC,KAAN,IAAeD,KAAK,CAACE,IAA5B;AACH,KAHI;AAILA,IAAAA,IAJK,gBAIAF,KAJA,EAIM;AACP,aAAOA,KAAK,CAACE,IAAb;AACH;AANI,GAPC;AAgBVG,EAAAA,SAAS,EAAE;AACPC,IAAAA,SADO,qBACGN,KADH,EACUC,KADV,EACgB;AACnBD,MAAAA,KAAK,CAACC,KAAN,GAAcA,KAAd;AACH,KAHM;AAIPM,IAAAA,QAJO,oBAIEP,KAJF,EAISQ,IAJT,EAIc;AACjBR,MAAAA,KAAK,CAACE,IAAN,GAAaM,IAAb;AACH;AANM,GAhBD;AAyBVC,EAAAA,OAAO,EAAE;AACCC,IAAAA,MADD,wBACoBC,WADpB,EACiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAxBC,gBAAAA,QAAwB,QAAxBA,QAAwB;AAAA;AAAA,uBACbd,KAAK,CAACe,IAAN,CAAW,aAAX,EAA0BF,WAA1B,CADa;;AAAA;AAC9BG,gBAAAA,QAD8B;AAAA,iDAE3BF,QAAQ,CAAC,SAAD,EAAYE,QAAQ,CAACN,IAAT,CAAcP,KAA1B,CAFmB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGrC,KAJI;AAMCc,IAAAA,OAND,0BAM8Bd,KAN9B,EAMoC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAxBe,gBAAAA,MAAwB,SAAxBA,MAAwB,EAAfhB,KAAe,SAAfA,KAAe;;AACrC,oBAAGC,KAAH,EAAS;AACLe,kBAAAA,MAAM,CAAC,WAAD,EAAcf,KAAd,CAAN;AACH;;AAHoC,oBAKjCD,KAAK,CAACC,KAL2B;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA,uBAUZH,KAAK,CAACmB,GAAN,CAAU,SAAV,CAVY;;AAAA;AAU7BH,gBAAAA,QAV6B;AAWjCE,gBAAAA,MAAM,CAAC,UAAD,EAAaF,QAAQ,CAACN,IAAtB,CAAN;AAXiC;AAAA;;AAAA;AAAA;AAAA;AAajCQ,gBAAAA,MAAM,CAAC,WAAD,EAAc,IAAd,CAAN;AACAA,gBAAAA,MAAM,CAAC,UAAD,EAAa,IAAb,CAAN;;AAdiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAiBxC,KAvBI;AAyBLE,IAAAA,OAzBK,0BAyBc;AAAA,UAATF,MAAS,SAATA,MAAS;AACf,aAAOlB,KAAK,CAACe,IAAN,CAAW,cAAX,EAA2BM,IAA3B,CAAgC,YAAM;AACzCH,QAAAA,MAAM,CAAC,WAAD,EAAc,IAAd,CAAN;AACAA,QAAAA,MAAM,CAAC,UAAD,EAAa,IAAb,CAAN;AACH,OAHM,CAAP;AAIH;AA9BI;AAzBC,CAAd","sourcesContent":["import axios from 'axios'\r\n\r\nexport default{\r\n    namespaced: true, \r\n    state: {\r\n        token: null,\r\n        user: null,\r\n    },\r\n\r\n    getters: {\r\n        authenticated(state){\r\n            return state.token && state.user\r\n        },\r\n        user(state){\r\n            return state.user\r\n        }\r\n    },\r\n\r\n    mutations: {\r\n        SET_TOKEN(state, token){\r\n            state.token = token\r\n        },\r\n        SET_USER(state, data){\r\n            state.user = data\r\n        }\r\n    },\r\n\r\n    actions: {\r\n        async signIn({dispatch}, credentials ){\r\n            let response = await axios.post('auth/signin', credentials);\r\n            return dispatch('attempt', response.data.token)\r\n        },\r\n\r\n        async attempt( { commit , state }, token){\r\n            if(token){\r\n                commit('SET_TOKEN', token)\r\n            }\r\n\r\n            if(!state.token){\r\n                return\r\n            }\r\n\r\n            try{\r\n                let response = await axios.get('auth/me')\r\n                commit('SET_USER', response.data)\r\n            }catch(e){\r\n                commit('SET_TOKEN', null)\r\n                commit('SET_USER', null)\r\n            }\r\n\r\n        },\r\n\r\n        signOut({ commit }){\r\n            return axios.post('auth/signout').then(() => {\r\n                commit('SET_TOKEN', null)\r\n                commit('SET_USER', null)\r\n            })\r\n        }\r\n\r\n    }\r\n}\r\n"]}]}
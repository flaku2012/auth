{"remainingRequest":"F:\\Programy_Zainstalowane_Stale\\xampp\\htdocs\\2021\\auth\\client\\node_modules\\babel-loader\\lib\\index.js!F:\\Programy_Zainstalowane_Stale\\xampp\\htdocs\\2021\\auth\\client\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!F:\\Programy_Zainstalowane_Stale\\xampp\\htdocs\\2021\\auth\\client\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!F:\\Programy_Zainstalowane_Stale\\xampp\\htdocs\\2021\\auth\\client\\src\\views\\ResetPassword.vue?vue&type=script&lang=js","dependencies":[{"path":"F:\\Programy_Zainstalowane_Stale\\xampp\\htdocs\\2021\\auth\\client\\src\\views\\ResetPassword.vue","mtime":1641048932756},{"path":"F:\\Programy_Zainstalowane_Stale\\xampp\\htdocs\\2021\\auth\\client\\babel.config.js","mtime":1640282747456},{"path":"F:\\Programy_Zainstalowane_Stale\\xampp\\htdocs\\2021\\auth\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Programy_Zainstalowane_Stale\\xampp\\htdocs\\2021\\auth\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\Programy_Zainstalowane_Stale\\xampp\\htdocs\\2021\\auth\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Programy_Zainstalowane_Stale\\xampp\\htdocs\\2021\\auth\\client\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly9pbXBvcnQgeyBtYXBBY3Rpb25zIH0gZnJvbSAndnVleCcKLy9pbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZScKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdyZXNldHBhc3N3b3JkJywKICBjb21wb25lbnRzOiB7Ly8KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBlbWFpbDogJycsCiAgICAgIGVycm9yRW1haWw6IG51bGwsCiAgICAgIGluZm9FbWFpbDogbnVsbCwKICAgICAgdG9rZW46ICcnLAogICAgICBlcnJvclRva2VuOiAnJywKICAgICAgaW5mb1Rva2VuOiAnJywKICAgICAgbmV3UGFzc3dvcmQ6ICcnLAogICAgICBlcnJvck5ld1Bhc3N3b3JkOiAnJywKICAgICAgcGFzc3dvcmRBZ2FpbjogJycsCiAgICAgIGVycm9yUGFzc3dvcmRBZ2FpbjogJycsCiAgICAgIHRva2VuVmFsaWQ6ICcnLAogICAgICB1c2VyOiBudWxsCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgc2VuZFRva2VuOiBmdW5jdGlvbiBzZW5kVG9rZW4oKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLmVycm9yRW1haWwgPSBudWxsOwoKICAgICAgaWYgKCF0aGlzLmVtYWlsKSB7CiAgICAgICAgdGhpcy5lcnJvckVtYWlsID0gIkVtYWlsIGplc3Qgd3lhbWdhbnkgISI7CiAgICAgIH0KCiAgICAgIGlmICghdGhpcy5lcnJvckVtYWlsKSB7CiAgICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgICBlbWFpbDogdGhpcy5lbWFpbAogICAgICAgIH07CiAgICAgICAgYXhpb3MucG9zdCgnc2VuZF90b2tlbl9lbWFpbCcsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMuaW5mb0VtYWlsID0gJ0VtYWlsIHNlbnQnOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgX3RoaXMuZXJyb3JFbWFpbCA9IGVycm9yLnJlc3BvbnNlLmRhdGEuZXJyb3I7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICB2YWxpZGF0ZVRva2VuOiBmdW5jdGlvbiB2YWxpZGF0ZVRva2VuKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuZXJyb3JUb2tlbiA9IG51bGw7CgogICAgICBpZiAoIXRoaXMudG9rZW4pIHsKICAgICAgICB0aGlzLmVycm9yVG9rZW4gPSAnVG9rZW4gaXMgcmVxdWlyZWQnOwogICAgICB9CgogICAgICBpZiAoIXRoaXMuZXJyb3JUb2tlbikgewogICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgdG9rZW46IHRoaXMudG9rZW4KICAgICAgICB9OwogICAgICAgIGF4aW9zLnBvc3QoJ3ZhbGlkYXRlX3Rva2VuJywgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmlkKSB7CiAgICAgICAgICAgIF90aGlzMi50b2tlblZhbGlkID0gdHJ1ZTsKICAgICAgICAgICAgX3RoaXMyLmluZm9Ub2tlbiA9ICdUb2tlbiBpcyB2YWxpZCc7CiAgICAgICAgICAgIF90aGlzMi51c2VyID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgIH0KICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIF90aGlzMi5lcnJvclRva2VuID0gZXJyb3IucmVzcG9uc2UuZGF0YS5lcnJvcjsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGNoYW5nZVBhc3N3b3JkOiBmdW5jdGlvbiBjaGFuZ2VQYXNzd29yZCgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB0aGlzLmVycm9yTmV3UGFzc3dvcmQgPSBudWxsOwogICAgICB0aGlzLmVycm9yUGFzc3dvcmRBZ2FpbiA9IG51bGw7CgogICAgICBpZiAoIXRoaXMubmV3UGFzc3dvcmQpIHsKICAgICAgICB0aGlzLmVycm9yTmV3UGFzc3dvcmQgPSAnUG9sZSBub3dlIGhhc8WCbyBqZXN0IHd5bWFnYW5lICEnOwogICAgICB9CgogICAgICBpZiAoIXRoaXMucGFzc3dvcmRBZ2FpbikgewogICAgICAgIHRoaXMuZXJyb3JQYXNzd29yZEFnYWluID0gJ1BvbGUgcG93dMOzcnogbm93ZSBoYXPFgm8gamVzdCB3eW1hZ2FuZSAhJzsKICAgICAgfQoKICAgICAgaWYgKHRoaXMubmV3UGFzc3dvcmQgIT09IHRoaXMucGFzc3dvcmRBZ2FpbikgewogICAgICAgIHRoaXMuZXJyb3JQYXNzd29yZEFnYWluID0gJ0hhc8WCYSBuaWUgcGFzdWrEhSBkbyBzaWViaWUgISc7CiAgICAgIH0KCiAgICAgIGlmICghdGhpcy5lcnJvck5ld1Bhc3N3b3JkICYmICF0aGlzLmVycm9yUGFzc3dvcmRBZ2FpbikgewogICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgcGFzc3dvcmQ6IHRoaXMubmV3UGFzc3dvcmQsCiAgICAgICAgICB1c2VyX2lkOiB0aGlzLnVzZXIuaWQKICAgICAgICB9OwogICAgICAgIGF4aW9zLnBvc3QoJ3Jlc2V0X3Bhc3N3b3JkJywgZGF0YSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczMuJHJvdXRlci5wdXNoKCcvc2lnbmluJyk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["F:\\Programy_Zainstalowane_Stale\\xampp\\htdocs\\2021\\auth\\client\\src\\views\\ResetPassword.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\r\n<div class=\"row\">\r\n    <div class=\"col-3\"></div>\r\n    <div class=\"col-6\">\r\n\r\n        <div class=\"alert alert-primary\">\r\n            <form v-on:submit.prevent=\"sendToken\">\r\n                <div class=\"form-group\">\r\n                    <div class=\"mb-3\">\r\n                    <label class=\"form-label\">Adres e-mail</label>\r\n                    <input type=\"text\" class=\"form-control\" v-model=\"email\" :class=\"{ 'is-invalid' : errorEmail, 'is-valid' : infoEmail }\" placeholder=\"Email\">\r\n                    <div class=\"invalid-feedback\"> {{errorEmail}} </div>\r\n                    <div class=\"valid-feedback\"> {{infoEmail}} </div>\r\n                    </div>\r\n                </div>\r\n                <button type=\"submit\" class=\"btn btn-primary\"> Wyślij kod autoryzacji na e-mail. </button>\r\n            </form>\r\n        </div>\r\n\r\n        <div class=\"alert alert-secondary\">\r\n            <form v-on:submit.prevent=\"validateToken\">\r\n                <div class=\"form-group\">\r\n                    <div class=\"mb-3\">\r\n                    <label class=\"form-label\">Token</label>\r\n                    <input type=\"text\" class=\"form-control\" v-model=\"token\" :class=\"{ 'is-invalid' : errorToken, 'is-valid' : infoToken }\" placeholder=\"Token...\">\r\n                    <div class=\"invalid-feedback\"> {{errorToken}} </div>\r\n                    <div class=\"valid-feedback\"> {{infoToken}} </div>\r\n                    </div>\r\n                </div>\r\n                <button type=\"submit\" class=\"btn btn-primary\">Zweryfikuj kod autoryzacji</button>\r\n            </form>\r\n        </div>\r\n\r\n        <div class=\"alert alert-success\" v-if=\"tokenValid\">\r\n            <form v-on:submit.prevent=\"changePassword\">\r\n                <div class=\"form-group\">\r\n                    <div class=\"mb-3\">\r\n                    <label class=\"form-label\">Nowe hasło</label>\r\n                    <input type=\"password\" class=\"form-control\" v-model=\"newPassword\" :class=\"{'is-invalid' : errorNewPassword}\" placeholder=\"New password ...\">\r\n                    <div class=\"invalid-feedback\"> {{errorNewPassword}} </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"form-group\">\r\n                    <div class=\"mb-3\">\r\n                    <label class=\"form-label\">Powtórz nowe hasło</label>\r\n                    <input type=\"password\" class=\"form-control\" v-model=\"passwordAgain\" :class=\"{'is-invalid' : errorPasswordAgain}\" placeholder=\"Password Again...\">\r\n                    <div class=\"invalid-feedback\"> {{errorPasswordAgain}} </div>\r\n                    </div>\r\n                </div>\r\n                <button type=\"submit\" class=\"btn btn-primary\">Zmień hasło</button>\r\n            </form>\r\n        </div>\r\n\r\n    </div>\r\n    <div class=\"col-3\"></div>\r\n</div>\r\n\r\n</template>\r\n\r\n<script>\r\n//import { mapActions } from 'vuex'\r\n//import store from '@/store'\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  name: 'resetpassword',\r\n  components: {\r\n    //\r\n  },\r\n\r\n  data(){\r\n      return {\r\n          email: '',\r\n          errorEmail: null,\r\n          infoEmail: null,\r\n          token: '',\r\n          errorToken: '',\r\n          infoToken: '',\r\n          newPassword: '',\r\n          errorNewPassword: '',\r\n          passwordAgain: '',\r\n          errorPasswordAgain: '',\r\n          tokenValid: '',\r\n          user: null\r\n      }\r\n  },\r\n\r\n  methods:{\r\n      sendToken(){\r\n          this.errorEmail = null;\r\n\r\n          if(!this.email)\r\n          {\r\n              this.errorEmail = \"Email jest wyamgany !\";\r\n          }\r\n\r\n          if(!this.errorEmail)\r\n          {\r\n              const data = {\r\n                  email: this.email\r\n              }\r\n              axios.post('send_token_email' , data).then( () => {\r\n                  this.infoEmail = 'Email sent';\r\n              }).catch( (error) => {\r\n                  this.errorEmail = error.response.data.error\r\n              })\r\n\r\n          }\r\n\r\n      },\r\n      validateToken(){\r\n          this.errorToken = null\r\n\r\n          if(!this.token)\r\n          {\r\n              this.errorToken = 'Token is required';\r\n          }\r\n\r\n          if(!this.errorToken)\r\n          {\r\n              const data = {\r\n                  token : this.token\r\n              }\r\n              axios.post('validate_token' , data).then( response => {\r\n                  if(response.data.id)\r\n                  {\r\n                      this.tokenValid = true;\r\n                      this.infoToken = 'Token is valid';\r\n                      this.user = response.data;\r\n                  }\r\n              }).catch( (error) => {\r\n                  this.errorToken = error.response.data.error\r\n              })\r\n          }\r\n\r\n      },\r\n      changePassword(){\r\n          this.errorNewPassword = null;\r\n          this.errorPasswordAgain = null;\r\n\r\n          if(!this.newPassword)\r\n          {\r\n              this.errorNewPassword = 'Pole nowe hasło jest wymagane !';\r\n          }\r\n\r\n          if(!this.passwordAgain)\r\n          {\r\n              this.errorPasswordAgain = 'Pole powtórz nowe hasło jest wymagane !'\r\n          }\r\n\r\n          if(this.newPassword !== this.passwordAgain)\r\n          {\r\n              this.errorPasswordAgain = 'Hasła nie pasują do siebie !';\r\n          }\r\n\r\n          if(!this.errorNewPassword && !this.errorPasswordAgain)\r\n          {\r\n              const data = {\r\n                  password: this.newPassword,\r\n                  user_id: this.user.id\r\n              }\r\n              axios.post('reset_password' , data).then( () => {\r\n                  this.$router.push('/signin')\r\n              })\r\n          }\r\n\r\n      }\r\n  }\r\n\r\n}\r\n</script>\r\n"],"sourceRoot":""}]}